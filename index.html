<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="images/favicon.ico" rel="shortcut icon">
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.2/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js"></script>
</head>

<body>
    <h1>ÂÖ∏ÊñáÊ≤πÈ£ØË™øÊü•</h1>
    <div id="app">
        <!-- <form action=""> -->
        <label for="name">ÂßìÂêç</label>
        <input type="text" name="name" id="name" v-model="name">
        <br>
        <label for="phone">ÊâãÊ©ü</label>
        <input type="tel" name="phone" id="phone" v-model="phone">
        <br>
        <label for="address">‰ΩèÂùÄ</label>
        <input type="text" name="address" id="address" v-model="address">
        <br>
        <label for="qty">Êï∏Èáè</label>
        <input type="number" name="qty" id="qty" v-model="qty">
        <br>
        <label for="isVeg">Á¥†È£ü</label>
        <input type="checkbox" name="isVeg" id="isVeg" v-model="isVeg">
        <br>
        <label for="remark">remark</label>
        <textarea name="remark" id="remark" v-model="Remark"></textarea>
        <br>
        <button type="submit" id="send" @click.prevent="addToForm">ÈÄÅÂá∫</button>
        <!-- </form> -->
    </div>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
</body>
<script>
    const App = {
        data() {
            return {
                // user choice data
                name: '',
                qty: 0,
                address: '',
                phone: '',
                isVeg: false,
                Remark: '',
                nowDateTime: (function () { var Today = new Date(); return Today.getFullYear() + " Âπ¥ " + (Today.getMonth() + 1) + " Êúà " + Today.getDate() + " Êó• " + Today.getHours() + " Èªû " + Today.getMinutes() + " ÂàÜ " + Today.getSeconds() + " Áßí" })()
            }
        },
        methods: {
            addToForm() {
                // this.$http.post('https://script.google.com/macros/s/AKfycbwNJ20RTPv2tu7sCG4R_TsfOb5z8PjbJZr8KAsjUSEjQ1pb4vNronP40CSaVSASgCCl/exec',
                //     { name: "ÂÖ∏ÊñáÊ≤πÈ£ØË™øÊü•" }, { emulateJSON: true }).then(function (res) {
                //         alert(res.body);
                //     }, function (res) {
                //         alert(res.status);
                //     });
                console.log(this.name);
                // axios.defaults.headers.post['Content-Type'] = 'application/json;charset=utf-8';
                // axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';
                var obj = {
                    name: this.name,
                    phone: this.phone,
                    address: this.address,
                    qty: this.qty,
                    isVeg: this.isVeg,
                    remark: this.remark,
                    date: this.nowDateTime
                }
                var formData = new FormData();

                formData.append("name", this.name);
                formData.append("phone", this.phone); // number 123456 is immediately converted to a string "123456"
                formData.append("qty", this.qty);
                formData.append("isVeg", this.isVeg);
                formData.append("remark", this.remark);
                formData.append("date", this.nowDateTime);
                
                // HTML file input, chosen by user
                formData.append("address", this.address);

                // JavaScript file-like object
                // var content = '<a id="a"><b id="b">hey!</b></a>'; // the body of the new file...
                // var blob = new Blob([content], { type: "text/xml" });

                // formData.append("webmasterfile", blob);

                var request = new XMLHttpRequest();
                request.open("GET", "https://script.google.com/macros/s/AKfycbwWhI2qKOc3npJw2Ha04ikJmmPtui4-6uRLUnkjjVejxSSeaqHI/exec");
                request.send(formData);
                // axios.defaults.headers.post['Content-Type'] = 'text/plain';

                // axios.get('https://script.google.com/macros/s/AKfycbwWhI2qKOc3npJw2Ha04ikJmmPtui4-6uRLUnkjjVejxSSeaqHI/exec',
                //     // this.input ‰πüÂ∞±ÊòØÊàëÂÄëË¶ÅÊõ¥Êñ∞‰∏äurlÁöÑË≥áÊñô
                //     // {name,email}
                //     JSON.stringify(obj)

                // )
                //     .then((res) => {
                //         console.log(res.data);
                //     })
                //     .catch((err) => {
                //         console.log(err);
                //     });
                // var vm = new Vue({
                //     el: '#send',
                //     data: {
                //         name: this.name,
                //         phone: this.phone,
                //         address: this.address,
                //         qty: this.qty,
                //         isVeg: this.isVeg,
                //         remark: this.remark,
                //         date: this.nowDateTime
                //     },
                //     methods: {
                //         post: function () {
                //             //ÁôºÈÄÅ post Ë´ãÊ±Ç
                //             this.$http.post('https://script.google.com/macros/s/AKfycbwNJ20RTPv2tu7sCG4R_TsfOb5z8PjbJZr8KAsjUSEjQ1pb4vNronP40CSaVSASgCCl/exec',
                //                 { name: "ÂÖ∏ÊñáÊ≤πÈ£ØË™øÊü•" }, { emulateJSON: true }).then(function (res) {
                //                     alert(res.body);
                //                 }, function (res) {
                //                     alert(res.status);
                //                 });
                //         }
                //     }
                // });
            }
        }
    };

    Vue.createApp(App).mount('#app');
</script>
<!-- üôáüôáÁ∑¥ÁøíÁµêÊùüüôáüôá -->

</html>